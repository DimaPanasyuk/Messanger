<div class="canvas-container"
      ng-if="subLoading">
  <div class="canvas">
    <div class="cube">
        <div class="group group--aqua">
            <div class="plane plane--aqua">
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
                <div class="dot dot--aqua"></div>
            </div>
        </div>
        <div class="group">
            <div class="plane plane--gold">
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
                <div class="dot dot--gold"></div>
            </div>
        </div>
        <div class="group group--tomato">
            <div class="plane plane--tomato">
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
                <div class="dot dot--tomato"></div>
            </div>
        </div>
    </div>
  </div>
</div>
<div class="container messages"
     ng-if="!subLoading">
     
  <div class="row"
       ng-if="current_dialog">
       
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        
        <div class="col-sm-2">
      
          <div class="form-group">
            <button class="btn btn-default btn-block back-btn"
                    ng-click="goBack()">
              <span class="glyphicon glyphicon-chevron-left text-primary"></span>
            </button>
          </div>
        </div>
        <div class="col-sm-10">
          
          <div class="alert alert-danger"
              ng-if="current_dialog && !current_dialog.participants">
            <strong>
              Host removed you from dialog!
            </strong>
          </div>
        </div>
      </div>
    </div>   
  </div>
  
  <div class="row"
       ng-if="current_dialog">
    
    <div class="col-md-8 col-md-offset-2">
     <div class="panel panel-info">
      <div class="panel-heading">
        <b>
          {{dialogTitle}}
        </b> messages
      </div>
              
      <div class="panel-body">
        
        
        <div class="panel panel-default"
             ng-if="current_dialog && current_dialog.participants">
          
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-2">
                
                <div class="messages-author-image pull-right"
                     ng-if="message.authorPhoto"
                     style="background-image: url({{message.authorPhoto}})">
                </div>
                
                <div class="messages-author-image-no pull-right"
                     ng-if="!message.authorPhoto">
                </div>
              </div>
              <div class="col-sm-7">
                
                <div class="form-group">
                  
                  <textarea rows="2"
                            class="form-control textarea"
                            ng-model="message.text"
                            ng-keydown="watchEnter($event)"
                            placeholder="Enter your message here">
                            
                  </textarea>
                </div>
              </div>
              <div class="col-sm-3">
                <button class="btn btn-sm btn-block btn-success"
                        id="message_text"
                        ng-disabled="!message.text.length"
                        ng-click="sendMessage()">
                  Send message
                </button>
                <a class="btn btn-sm btn-block btn-default"
                   ng-if="(current_dialog &&  userUid) && current_dialog.dialogHost === userUid"
                   href="#/dialogs/{{dialogName}}/settings">
                  <span class="glyphicon glyphicon-cog"></span>
                  Dialog settings
                </a>
              </div>
            </div>
          </div>
        </div>
             
              
        <ul class="messages">
          
          <li class="messsages__message"
              ng-repeat="message in messages | orderBy: time : true">
            
            <div class="row">
              <div class="col-xs-2 col-sm-1 messages__message-photo">
                <div class="messages-profile-image pull-right"
                     ng-if="message.authorPhoto"
                     style="background-image: url({{message.authorPhoto}})">
                </div>
                <div class="messages-profile-image-no pull-right"
                     ng-if="!message.authorPhoto">
                </div>
              </div>
              <div class="col-xs-7 col-sm-9 text-left">
                <strong class="text-primary">
                  {{message.author}}
                </strong>
                <div class="row">
                  <div class="col-xs-12">
                    {{message.text}}  
                  </div>
                </div>
              </div>
              <div class="col-xs-3 col-sm-2 text-center">
                {{message.time | fromNow}}
              </div>
            </div>
          </li>
        </ul>  
        
        <div class="alert alert-danger"
             ng-if="!messages.length && !loading">
          This dialog has no messages yet!
        </div>
      </div>  
     </div> 
    </div>
  </div>
</div>